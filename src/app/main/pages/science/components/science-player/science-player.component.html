<div *ngIf="state$ | async as state">
  <div
    class="player__container"
    *ngIf="showStereoPlayer"
    [class.inactive]="!state.canplay"
    [class.loading]="isPreloader"
  >
    <div class="player__actions">
      <button class="btn__player back" (click)="backward(state.currentTime)">
        <svg width="22" height="15" viewBox="0 0 22 15">
          <use xlink:href="./assets/sprites.svg#backDesktopBtn"></use>
        </svg>
      </button>
      <button class="btn__player prev" (click)="previous()">
        <svg width="15" height="19" viewBox="0 0 15 19">
          <use xlink:href="./assets/sprites.svg#prevDesktopBtn"></use>
        </svg>
      </button>
      <button class="btn__player play" (click)="play()" [disabled]="state.error" *ngIf="!state.playing">
        <svg width="31" height="31" viewBox="0 0 31 31">
          <use xlink:href="./assets/sprites.svg#playDesktopBtn"></use>
        </svg>
      </button>
      <button class="btn__player pause" (click)="pause()" *ngIf="state.playing">
        <svg width="32" height="31" viewBox="0 0 32 31">
          <use xlink:href="./assets/sprites.svg#pauseDesktopBtn"></use>
        </svg>
      </button>
      <button class="btn__player next" (click)="next()">
        <svg width="15" height="19" viewBox="0 0 15 19">
          <use xlink:href="./assets/sprites.svg#nextDesktopBtn"></use>
        </svg>
      </button>
      <button class="btn__player forward" (click)="forward(state.currentTime)">
        <svg width="22" height="15" viewBox="0 0 22 15">
          <use xlink:href="./assets/sprites.svg#forwardDesktopBtn"></use>
        </svg>
      </button>
    </div>
    <div class="player__actions__mobile">
      <button class="btn__player__mobile backward" (click)="backward(state.currentTime)">
        <svg width="47" height="32" viewBox="0 0 47 32">
          <use xlink:href="./assets/sprites.svg#backwardMobileBtn"></use>
        </svg>
      </button>
      <button class="btn__player__mobile play" (click)="play()" [disabled]="state.error" *ngIf="!state.playing">
        <svg width="74" height="74" viewBox="0 0 74 74">
          <use xlink:href="./assets/sprites.svg#playMobileBtn"></use>
        </svg>
      </button>
      <button class="btn__player__mobile pause" (click)="pause()" *ngIf="state.playing">
        <svg width="74" height="74" viewBox="0 0 74 74">
          <use xlink:href="./assets/sprites.svg#pauseMobileBtn"></use>
        </svg>
      </button>
      <button class="btn__player__mobile forward" (click)="forward(state.currentTime)">
        <svg width="47" height="32" viewBox="0 0 47 32">
          <use xlink:href="./assets/sprites.svg#forwardMobileBtn"></use>
        </svg>
      </button>
    </div>
    <div class="player__timeline">
      <input
        #slider
        class=""
        type="range"
        min="0"
        step="0.1"
        [max]="state.duration || 0"
        [value]="state.currentTime"
        (input)="onSliderChangeEnd($event)"
        [disabled]="state.error && state.currentTime === undefined"
      />

      <span class="timeline__time current__time">{{ state.readableCurrentTime }}</span>
      <span class="timeline__time duration">{{ state.readableDuration }}</span>
    </div>
  </div>
</div>
